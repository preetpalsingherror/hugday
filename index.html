<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>My Sanctuary üõ°Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600&family=Oswald:wght@500&family=Playfair+Display:ital@1&display=swap" rel="stylesheet">
    
    <style>
        /* --- CORE RESET --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; touch-action: none; }

        body {
            height: 100dvh; width: 100vw;
            background: #000; color: #fff;
            margin: 0; padding: 0;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            position: relative;
        }

        /* --- LAYER 1: THE STORM (CANVAS) --- */
        canvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1; opacity: 0.6; pointer-events: none;
        }

        .storm-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, transparent 0%, #000 90%);
            z-index: 2; pointer-events: none;
        }

        /* --- LAYER 2: THE SAFE SPACE (WARMTH) --- */
        .safe-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            /* Warm Angelic Light */
            background: radial-gradient(circle, #fffbf0 0%, #ffecd2 40%, #fcb69f 100%);
            z-index: 0; /* Behind storm initially */
            opacity: 0; transform: scale(0.5);
            transition: opacity 0.1s linear, transform 0.1s linear;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* --- UI ELEMENTS --- */
        .ui-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        .hero-text {
            font-family: 'Oswald', sans-serif; font-size: 1.5rem; letter-spacing: 2px;
            text-align: center; margin-bottom: 40px; text-transform: uppercase;
            text-shadow: 0 0 20px rgba(0,0,0,0.8);
            transition: opacity 0.5s;
        }

        /* THE BUTTON */
        .hold-btn {
            position: relative; width: 100px; height: 100px;
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 2rem; cursor: pointer;
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .hold-btn:active { transform: scale(0.9); background: rgba(255,255,255,0.1); }

        /* PROGRESS RING */
        .progress-ring {
            position: absolute; top: -10px; left: -10px;
            width: 120px; height: 120px; transform: rotate(-90deg); pointer-events: none;
        }
        .progress-ring__circle {
            transition: stroke-dashoffset 0.05s linear;
            stroke: #fff; stroke-width: 2; stroke-linecap: round; fill: transparent;
            filter: drop-shadow(0 0 5px #fff);
        }

        .hint-text {
            margin-top: 30px; font-size: 0.75rem; letter-spacing: 2px; opacity: 0.7;
            font-weight: 600; text-transform: uppercase;
        }

        /* --- FINAL CARD --- */
        .final-card {
            position: absolute; width: 85%; max-width: 360px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-radius: 24px; padding: 40px 30px;
            text-align: center;
            opacity: 0; transform: translateY(20px) scale(0.95);
            transition: all 1s cubic-bezier(0.19, 1, 0.22, 1);
            z-index: 50; pointer-events: none;
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
        }
        
        .card-active { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }

        .final-title {
            font-family: 'Playfair Display', serif; font-size: 2.5rem; color: #d4af37;
            margin-bottom: 20px; font-style: italic;
        }
        
        .final-body {
            font-family: 'Inter', sans-serif; font-size: 1rem; color: #333;
            line-height: 1.6; font-weight: 500; margin-bottom: 30px;
        }

        .highlight { color: #000; font-weight: 700; text-transform: uppercase; }

        .wa-btn {
            background: #111; color: #fff; padding: 16px 36px;
            border-radius: 50px; text-decoration: none; font-weight: 600;
            font-size: 0.9rem; letter-spacing: 0.5px; display: inline-block;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        /* --- START OVERLAY --- */
        .start-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 100;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s;
        }
        .start-btn {
            background: transparent; border: 1px solid rgba(255,255,255,0.5);
            color: #fff; padding: 15px 40px; border-radius: 50px;
            font-family: 'Oswald', sans-serif; letter-spacing: 2px;
            margin-top: 20px; cursor: pointer;
        }

    </style>
</head>
<body>

    <audio id="rain-sound" loop>
        <source src="https://assets.mixkit.co/active_storage/sfx/2515/2515-preview.mp3" type="audio/mpeg">
    </audio>
    <audio id="peace-sound" loop>
        <source src="https://assets.mixkit.co/active_storage/stock_music/62/62-preview.mp3" type="audio/mpeg">
    </audio>

    <div class="start-overlay" id="start-screen">
        <div style="font-family:'Playfair Display'; font-style:italic; font-size:2rem;">Zohara</div>
        <div style="color:#666; font-size:0.75rem; margin-top:5px; letter-spacing:1px;">USE HEADPHONES üéß</div>
        <button class="start-btn" onclick="init()">ENTER</button>
    </div>

    <canvas id="rainCanvas"></canvas>
    <div class="storm-overlay" id="storm-bg"></div>
    <div class="safe-layer" id="safe-bg"></div>

    <div class="ui-container" id="ui-layer">
        <div class="hero-text" id="status-text">The world is loud.</div>
        
        <div style="position:relative;">
            <svg class="progress-ring" width="120" height="120">
                <circle class="progress-ring__circle" stroke="white" stroke-width="2" fill="transparent" r="56" cx="60" cy="60"/>
            </svg>
            <div class="hold-btn" id="btn"
                 ontouchstart="startHold(event)" ontouchend="endHold()"
                 onmousedown="startHold(event)" onmouseup="endHold()">
                üõ°Ô∏è
            </div>
        </div>

        <div class="hint-text" id="hint">Hold to find me</div>
    </div>

    <div class="final-card" id="final">
        <div class="final-title">My Sanctuary</div>
        <div class="final-body">
            I AM HERE.<br>
            I WANNA BE WITH YOU.<br><br>
            I want you to be <span class="highlight">happy</span> and <span class="highlight">relieved</span> with me.<br><br>
            Whenever you need me, just come here.
        </div>
        <a href="#" id="wa-link" class="wa-btn">I Feel Safe With You ‚ù§Ô∏è</a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        const yourPhoneNumber = "917795253497"; 

        // ELEMENTS
        const startScreen = document.getElementById('start-screen');
        const rainSound = document.getElementById('rain-sound');
        const peaceSound = document.getElementById('peace-sound');
        const safeBg = document.getElementById('safe-bg');
        const stormBg = document.getElementById('storm-bg');
        const canvas = document.getElementById('rainCanvas');
        const ctx = canvas.getContext('2d');
        const circle = document.querySelector('.progress-ring__circle');
        const statusText = document.getElementById('status-text');
        const finalCard = document.getElementById('final');
        const uiLayer = document.getElementById('ui-layer');

        // RING SETUP
        const radius = circle.r.baseVal.value;
        const circumference = radius * 2 * Math.PI;
        circle.style.strokeDasharray = `${circumference} ${circumference}`;
        circle.style.strokeDashoffset = circumference;

        // STATE
        let width, height;
        let drops = [];
        let isHolding = false;
        let progress = 0;
        let finished = false;

        // INIT
        function init() {
            startScreen.style.opacity = 0;
            setTimeout(() => startScreen.style.display = 'none', 800);
            
            rainSound.volume = 0.5;
            rainSound.play();
            peaceSound.volume = 0;
            peaceSound.play();

            resize();
            createDrops();
            loop(); // Start visual loop
        }

        // RAIN ENGINE
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);

        function createDrops() {
            for(let i=0; i<150; i++) {
                drops.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    l: Math.random() * 20 + 10,
                    v: Math.random() * 10 + 10
                });
            }
        }

        function drawRain() {
            ctx.clearRect(0, 0, width, height);
            
            // Opacity of rain depends on progress (inverse)
            ctx.strokeStyle = `rgba(255,255,255,${0.3 * (1 - progress/100)})`;
            ctx.lineWidth = 1;

            for(let i=0; i<drops.length; i++) {
                let d = drops[i];
                ctx.beginPath();
                ctx.moveTo(d.x, d.y);
                ctx.lineTo(d.x, d.y + d.l);
                ctx.stroke();
                
                d.y += d.v;
                if(d.y > height) {
                    d.y = -d.l;
                    d.x = Math.random() * width;
                }
            }
        }

        // INTERACTION HANDLERS
        function startHold(e) { e.preventDefault(); if(!finished) isHolding = true; }
        function endHold() { if(!finished) isHolding = false; }

        // MAIN LOOP
        function loop() {
            if(finished) return;

            // 1. Draw Rain
            drawRain();

            // 2. Logic
            if(isHolding) {
                progress += 0.8;
            } else {
                progress -= 1.5;
            }
            progress = Math.max(0, Math.min(100, progress));

            // 3. Update Visuals
            const ratio = progress / 100;
            
            // Ring
            circle.style.strokeDashoffset = circumference - (ratio * circumference);
            
            // Backgrounds
            safeBg.style.opacity = ratio;
            safeBg.style.transform = `scale(${0.5 + (ratio * 0.5)})`; // Expands from center
            stormBg.style.opacity = 1 - ratio;

            // Text
            if(progress < 20) statusText.innerText = "The world is loud.";
            else if(progress < 50) statusText.innerText = "I am here...";
            else if(progress < 80) statusText.innerText = "Just you and me.";
            else statusText.innerText = "Let it go.";

            // Audio Mixing
            rainSound.volume = Math.max(0, 0.5 * (1 - ratio));
            peaceSound.volume = Math.min(1, 1.0 * ratio);

            // Finish
            if(progress >= 100) {
                finish();
            } else {
                requestAnimationFrame(loop);
            }
        }

        function finish() {
            finished = true;
            
            // Fade out UI
            uiLayer.style.transition = "opacity 0.5s";
            uiLayer.style.opacity = 0;
            canvas.style.opacity = 0;

            setTimeout(() => {
                finalCard.classList.add('card-active');
                
                // Confetti
                confetti({
                    particleCount: 150,
                    spread: 100,
                    colors: ['#ffffff', '#ffecd2', '#d4af37'],
                    origin: { y: 0.6 }
                });

                const msg = "I found my Sanctuary with you. üõ°Ô∏è‚ù§Ô∏è I am relieved and happy. I love you Zohara.";
                document.getElementById('wa-link').href = `https://wa.me/${yourPhoneNumber}?text=${encodeURIComponent(msg)}`;
            }, 500);
        }

    </script>
</body>
</html>
