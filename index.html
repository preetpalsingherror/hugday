<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>My Sanctuary üõ°Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&family=Playfair+Display:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
    
    <style>
        /* --- RESET & CORE --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; touch-action: none; }

        body {
            height: 100dvh; width: 100vw;
            background: #000; color: #fff;
            margin: 0; padding: 0;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            position: relative;
        }

        /* --- LAYER 1: THE STORM (Outside) --- */
        .storm-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1a1a1a 0%, #000000 90%);
            z-index: 10;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: filter 0.5s;
        }

        /* Optimized Rain */
        .rain {
            position: absolute; width: 100%; height: 100%; pointer-events: none; opacity: 0.4;
            background-image: url('https://cdn.pixabay.com/photo/2012/04/18/13/22/rain-37042_960_720.png');
            animation: rainFall 0.4s linear infinite;
        }
        @keyframes rainFall { from { background-position: 0 0; } to { background-position: -20px 400px; } }

        /* --- LAYER 2: THE SANCTUARY (Inside) --- */
        .safe-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #fff1eb 0%, #ace0f9 100%); /* Warm Angelic Gradient */
            z-index: 5;
            opacity: 0; transform: scale(1.2); filter: blur(30px);
            transition: all 0.1s linear; /* Controlled by JS */
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* --- INTERACTIVE BUTTON --- */
        .ui-container {
            position: relative; z-index: 20; text-align: center;
            display: flex; flex-direction: column; align-items: center;
        }

        .title-text {
            font-family: 'Playfair Display', serif; font-size: 2rem; margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(255,255,255,0.3);
            transition: opacity 0.3s;
        }

        .hold-wrapper {
            position: relative; width: 120px; height: 120px;
            display: flex; justify-content: center; align-items: center;
        }

        /* The SVG Ring */
        .progress-ring {
            position: absolute; top: 0; left: 0; transform: rotate(-90deg);
            width: 120px; height: 120px; pointer-events: none;
        }
        .progress-ring__circle {
            transition: stroke-dashoffset 0.05s linear;
            stroke: #fff; stroke-width: 3; stroke-linecap: round; fill: transparent;
            filter: drop-shadow(0 0 8px #fff);
        }

        /* The Button */
        .finger-btn {
            width: 90px; height: 90px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 2rem; cursor: pointer;
            backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }
        .finger-btn:active { transform: scale(0.9); background: rgba(255,255,255,0.1); }

        .hint-text {
            font-family: 'Inter', sans-serif; font-size: 0.75rem; letter-spacing: 2px;
            color: rgba(255,255,255,0.6); margin-top: 30px; text-transform: uppercase;
        }

        /* --- FINAL CARD --- */
        .glass-card {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border-radius: 24px; padding: 40px 30px;
            text-align: center; width: 85%; max-width: 360px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.4);
            opacity: 0; transform: translateY(40px);
            transition: all 1s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .card-active { opacity: 1; transform: translateY(0); }

        .final-title {
            font-family: 'Playfair Display', serif; font-size: 2.2rem; color: #111;
            margin-bottom: 20px; font-style: italic;
        }
        
        .final-body {
            font-family: 'Inter', sans-serif; font-size: 0.95rem; color: #333;
            line-height: 1.8; font-weight: 500; margin-bottom: 30px;
        }
        
        .strong { font-weight: 700; color: #000; }

        .wa-btn {
            background: #111; color: #fff; padding: 16px 36px;
            border-radius: 50px; text-decoration: none; font-weight: 600;
            font-size: 0.9rem; letter-spacing: 0.5px;
            display: inline-block; transition: transform 0.2s;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .wa-btn:active { transform: scale(0.95); }

        /* --- START OVERLAY --- */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 100;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.6s;
        }
        .enter-btn {
            background: transparent; border: 1px solid rgba(255,255,255,0.4);
            color: #fff; padding: 14px 34px; border-radius: 50px;
            font-family: 'Inter', sans-serif; letter-spacing: 2px; font-size: 0.8rem;
            margin-top: 30px; cursor: pointer; transition: 0.3s;
        }
        .enter-btn:active { background: #fff; color: #000; }

    </style>
</head>
<body>

    <audio id="rain-sound" loop>
        <source src="https://assets.mixkit.co/active_storage/sfx/2515/2515-preview.mp3" type="audio/mpeg">
    </audio>
    <audio id="peace-sound" loop>
        <source src="https://assets.mixkit.co/active_storage/stock_music/62/62-preview.mp3" type="audio/mpeg">
    </audio>

    <div class="overlay" id="start-screen">
        <div style="font-family:'Playfair Display'; font-size:2rem; font-style:italic;">Zohara</div>
        <div style="color:#666; font-size:0.75rem; margin-top:5px; letter-spacing:1px;">USE HEADPHONES üéß</div>
        <button class="enter-btn" onclick="initExperience()">ENTER SANCTUARY</button>
    </div>

    <div class="safe-layer" id="safe">
        <div class="glass-card" id="final-card">
            <div class="final-title">My Zohara</div>
            <div class="final-body">
                I AM HERE.<br>
                I WANNA BE WITH YOU.<br><br>
                I want you to be <span class="strong">HAPPY</span> and <span class="strong">RELIEVED</span> with me.<br><br>
                <span style="color:#d4af37; font-size:1.1rem; font-weight:700;">I LOVE YOU.</span>
            </div>
            <a href="#" id="wa-link" class="wa-btn">I Feel Relieved ‚ù§Ô∏è</a>
        </div>
    </div>

    <div class="storm-layer" id="storm">
        <div class="rain"></div>
        
        <div class="ui-container">
            <div class="title-text" id="main-text">The noise is loud.</div>
            
            <div class="hold-wrapper">
                <svg class="progress-ring" width="120" height="120">
                    <circle class="progress-ring__circle" stroke="white" stroke-width="2" fill="transparent" r="56" cx="60" cy="60"/>
                </svg>
                <div class="finger-btn" id="btn"
                     ontouchstart="startHold(event)" ontouchend="endHold(event)"
                     onmousedown="startHold(event)" onmouseup="endHold(event)">
                    üõ°Ô∏è
                </div>
            </div>

            <div class="hint-text" id="hint">Hold to find peace</div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        const yourPhoneNumber = "917795253497"; 

        // ELEMENTS
        const storm = document.getElementById('storm');
        const safe = document.getElementById('safe');
        const mainText = document.getElementById('main-text');
        const hint = document.getElementById('hint');
        const circle = document.querySelector('.progress-ring__circle');
        const rainSound = document.getElementById('rain-sound');
        const peaceSound = document.getElementById('peace-sound');
        const startScreen = document.getElementById('start-screen');
        const finalCard = document.getElementById('final-card');

        // RING SETUP
        const radius = circle.r.baseVal.value;
        const circumference = radius * 2 * Math.PI;
        circle.style.strokeDasharray = `${circumference} ${circumference}`;
        circle.style.strokeDashoffset = circumference;

        // STATE
        let isHolding = false;
        let progress = 0; // 0 to 100
        let finished = false;
        let animationId;

        function initExperience() {
            startScreen.style.opacity = 0;
            setTimeout(() => startScreen.style.display = 'none', 600);
            
            rainSound.volume = 0.5;
            rainSound.play();
            peaceSound.volume = 0;
            peaceSound.play();

            // Start Animation Loop
            requestAnimationFrame(updateLoop);
        }

        function startHold(e) {
            e.preventDefault(); // Prevent iOS text selection/zoom
            if(finished) return;
            isHolding = true;
        }

        function endHold(e) {
            if(e) e.preventDefault();
            if(finished) return;
            isHolding = false;
        }

        // MAIN PHYSICS LOOP (Runs 60-120 times per second)
        function updateLoop() {
            if (finished) return;

            // 1. Calculate Progress
            if (isHolding) {
                progress += 0.8; // Fill Speed
            } else {
                progress -= 1.5; // Decay Speed
            }

            // Clamp 0-100
            progress = Math.max(0, Math.min(100, progress));

            // 2. Render UI
            const offset = circumference - (progress / 100) * circumference;
            circle.style.strokeDashoffset = offset;

            // 3. Render Visual Effects (Opacity/Scale/Blur)
            const ratio = progress / 100;
            
            // Fade Storm
            storm.style.opacity = 1 - ratio;
            storm.style.transform = `scale(${1 + (ratio * 0.1)})`; // Slight zoom in
            
            // Show Safe Layer
            safe.style.opacity = ratio;
            safe.style.filter = `blur(${(1 - ratio) * 30}px)`; // Blur transition
            safe.style.transform = `scale(${1.2 - (ratio * 0.2)})`; // Zoom out effect

            // 4. Render Audio Crossfade
            rainSound.volume = Math.max(0, 0.5 * (1 - ratio));
            peaceSound.volume = Math.min(1, 1.0 * ratio);

            // 5. Dynamic Text
            if(progress > 20 && progress < 50) mainText.innerText = "I am here...";
            else if(progress >= 50 && progress < 80) mainText.innerText = "Just breathe...";
            else if(progress >= 80) mainText.innerText = "Almost safe...";
            else if(!isHolding && progress < 20) mainText.innerText = "The noise is loud.";

            // 6. Finish Condition
            if (progress >= 100) {
                triggerFinish();
            } else {
                requestAnimationFrame(updateLoop);
            }
        }

        function triggerFinish() {
            finished = true;
            storm.style.display = 'none';
            safe.style.opacity = 1;
            safe.style.filter = 'blur(0px)';
            safe.style.transform = 'scale(1)';

            setTimeout(() => {
                finalCard.classList.add('card-active');
                
                // Elegant Confetti
                confetti({
                    particleCount: 150,
                    spread: 120,
                    origin: { y: 0.6 },
                    colors: ['#ffffff', '#d4af37', '#ace0f9']
                });

                // Link
                const msg = "I found my Sanctuary with you. üõ°Ô∏è‚ù§Ô∏è I am happy and relieved. I love you Zohara.";
                document.getElementById('wa-link').href = `https://wa.me/${yourPhoneNumber}?text=${encodeURIComponent(msg)}`;
            }, 500);
        }

    </script>
</body>
</html>
